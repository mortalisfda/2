<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Aventura Gráfica</title>

  <!-- Tipografías -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Merriweather:wght@300;400;700;900&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Paleta pergamino (sin imágenes) */
      --papel-claro: #f3e0b5;
      --papel-medio: #d9ba7c;
      --borde-oscuro: #3a2b12;
      
      --tinta: #2b1b0d;

      /* Margen adaptable para la escena */
      --margen-escena: clamp(8px, 3vw, 20px);

      /* Compatibilidad con tu código previo */
      --celeste: #000000;
      --celeste-strong: #4e4e4e;
      --negro: #000;
      --blanco: #fff;
    }

    body {
      margin: 0;
      background-image: url('img/FONDO.webp');
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
      font-family: "Cinzel Decorative", serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    h1 {
      margin-top: 20px;
      margin-bottom: 5px;
      font-size: 2.5em;
      color: white;
      text-align: center;
      letter-spacing: 2px;
    }

    h2 {
      margin-top: 0;
      margin-bottom: 20px;
      font-size: 1.3em;
      color: white;
      text-align: center;
      font-weight: 400;
    }

    /* ===== Contenedor con estética pergamino ===== */
    #contenedor {
      position: relative;
      aspect-ratio: 1 / 1;
      width: 100vw;
      max-width: 600px;
      border: 18px solid var(--borde-medio);
      box-shadow:
        0 0 0 2px var(--borde-oscuro) inset,
        0 12px 28px rgba(0,0,0,0.55);
      background: linear-gradient(to bottom, var(--papel-claro), var(--papel-medio));
      overflow: hidden;
      display: grid;
      grid-template-rows: 1fr auto auto;
    }

    /* ===== Escena con margen y ajuste ===== */
    #escena {
      padding: var(--margen-escena);
      background-size: contain; /* evita cortes */
      background-position: center;
      background-repeat: no-repeat;
      background-origin: content-box;
      background-clip: content-box;
      opacity: 0;
      transition: opacity 0.8s ease-in-out;
      cursor: default;
    }

    /* Borde interno sutil */
    #escena::before {
      content: "";
      display: block;
      height: 100%;
      width: 100%;
      box-shadow: inset 0 0 12px rgba(0,0,0,0.18);
      border-radius: 2px;
    }

    #escena.clickable { cursor: pointer; }

    /* ===== Caja de texto ===== */
    #cajaTexto {
      background: linear-gradient(to bottom, var(--papel-claro), var(--papel-medio));
      border: 2px solid var(--borde-oscuro);
      border-top-width: 3px;
      border-bottom-width: 3px;
      box-shadow:
        0 3px 0 var(--borde-oscuro),
        inset 0 0 10px rgba(255,255,255,0.20),
        inset 0 0 25px rgba(0,0,0,0.35);
      padding: 10px 50px;
      text-align: center;
      font-family: "Merriweather", serif;
      font-size: 1rem;
      line-height: 1.7;
      color: var(--tinta);
      text-shadow: 0 0 2px rgba(255,255,255,0.15);
      min-height: 80px;
    }

    .maquina span {
      border-right: 2px solid var(--borde-oscuro);
      display: inline;
      animation: blink 0.8s infinite;
    }
    @keyframes blink { 50% { border-color: transparent; } }

    /* ===== Botonera ===== */
    .botones {
      display: flex;
      justify-content: space-between;
      gap: 14px;
      padding: 14px 22px;
      background: linear-gradient(to bottom, #ead8ad 0%, #d9ba7c 100%);
      border-top: 3px solid var(--borde-medio);
      border-bottom: 3px solid var(--borde-medio);
      box-shadow: inset 0 0 15px rgba(0,0,0,0.25);
    }

    .btn {
      flex: 1;
      padding: 12px 14px;
      font-size: 1.02rem;
      border: 2px solid var(--borde-oscuro);
      background: linear-gradient(to bottom, var(--papel-claro), var(--papel-medio));
      font-family: "Cinzel Decorative", serif;
      color: var(--tinta);
      cursor: pointer;
      letter-spacing: 0.5px;
      box-shadow: 0 3px 0 var(--borde-oscuro), inset 0 0 10px rgba(255,255,255,0.2);
      transition: all 0.2s ease;
      text-transform: none;
    }

    .btn:hover {
      background: linear-gradient(to bottom, #fff2c9, #e3c890);
      transform: translateY(-2px);
      box-shadow: 0 6px 8px rgba(0,0,0,0.22);
    }

    .btn:active {
      transform: translateY(1px);
      box-shadow: inset 0 0 8px rgba(0,0,0,0.25);
    }

    @keyframes oldGlow {
      0%,100% { box-shadow: 0 0 6px rgba(200,170,90,0.5), 0 0 12px rgba(220,190,120,0.25); }
      50% { box-shadow: 0 0 12px rgba(230,200,130,0.85), 0 0 22px rgba(240,210,140,0.55); }
    }

    .glow { animation: oldGlow 1.8s ease-in-out infinite; }
    .no-glow { animation: none !important; }

    @media (max-width: 500px) {
      #cajaTexto { font-size: 0.95rem; }
      .btn { font-size: 0.95rem; padding: 10px 12px; }
    }

    .visually-hidden {
      position: absolute !important;
      left: -9999px !important;
      width: 1px; height: 1px; overflow: hidden;
    }
  </style>
</head>

<body>
  <h1>Mortalis</h1>
  <h2>La historia de Selen</h2>

  <audio id="bgAudio" class="visually-hidden" src="Sonidos/Sonido1.mp3" preload="auto" loop></audio>

  <div id="contenedor">
    <div id="escena"></div>
    <div id="cajaTexto"></div>
    <div class="botones" id="botonera"></div>
  </div>

  <script>
    const bgAudio = document.getElementById('bgAudio');
    bgAudio.volume = 0.35;
    let audioDesbloqueado = false;

    async function iniciarAudio() {
      if (audioDesbloqueado) return;
      try {
        await bgAudio.play();
        audioDesbloqueado = true;
        ['pointermove','click','touchstart'].forEach(e=>window.removeEventListener(e,iniciarAudio));
        let v = 0.0;
        bgAudio.volume = v;
        const fade = setInterval(() => {
          v += 0.05; bgAudio.volume = Math.min(v, 0.35);
          if (v >= 0.35) clearInterval(fade);
        }, 80);
      } catch (e) { audioDesbloqueado = false; }
    }
    ['pointermove','click','touchstart'].forEach(e=>window.addEventListener(e,iniciarAudio,{passive:true}));
    document.addEventListener('visibilitychange', () => {
      if (!audioDesbloqueado) return;
      if (document.hidden) bgAudio.pause(); else bgAudio.play().catch(()=>{});
    });

    const pantallas = [
      { texto: "Bienvenido a esta aventura", mas: "Vas a conocer la historia de Selen Aru" },
      { texto: "Las IA ayudaron mucho a las personas pero también las debilitaron física y emocionalmente, poco a poco fueron aislándose cada vez mas...", mas: "Su uso excesivo promovió también la automedicación, y las personas se volvieron resistentes a los medicamentos por eso se aislaron por miedo a enfermarse y no conseguir una cura." },
      { texto: "Convencida de que la medicina natural es la solución decide salir y comenzar a cultivar y cosechar sus propias plantas para obtener medicina y alimentos", mas: "Ella lo hacia para sus seres queridos que fueron afectados por el abuso de medicamentos, pero en el fondo ella quería ayudar a todos tener símbolos tallados." },
      { texto: "Selen decide salir con una mochila llena de semillas a plantar por todas partes y a animar a las personas a cuidarlas entre todos.", mas: "les entregaba frascos con hiervas curativas a las personas a cambio de plantar en el frente de las casas, aunque un poco dudosas deciden que ayudarla ya que era una persona muy querida en el pueblo." },
      { texto: "Pasaron años en los que Selen acostumbraba a ir a las plazas a cuidar las plantas, enseñar lo que sabe y compartir una merienda con las personas", mas: "Un día se reúne todo el pueblo a su alrededor a festejar  y agradecerle por como los ayudo a cambiar y salir del aislamiento." },
      { texto: "Ella era una anciana muy sabia y comenzo a escribir un libro en el que dejaria todo su concoimiento para que las personas puedan difundirlo y ayudar a mucha gente", mas: "Lamentablemente Selen era muy mayor y fallecio al poco tiempo de terminar su libro, no fue vivido como una pérdida común. La comunidad entendió que, al morir, su energía no desaparecería sino que de alguna forma permanecería" },
      { texto: "El pueblo decide reunirse en el arbol central, y llevar con ellos el cristal que identificaba a cada familia", mas: "Al llegar el atardecer todas las familias se acercaron al arbol donde descansaba el cuerpo de Selen." },
      { texto: "Cada familia elegio a una persona que colocaría el cristal en el arbol", mas: "Al unir todos los cristales el lugar se inundo de luz y alegría y las personas comenzaron a experimentar recuerdos y sentimientos con la energía de Selen" },
      { texto: "Todos los años se celebra y recuerda su legado, su energía, al condensarse en el Cristal Mayor de Memoria, no desaparece sino que se convierte en un faro para las futuras generaciones asegurando que su memoria no se pierda.", mas: "Click en el cristal para conocer mas." }
    ];

    let indice = 0;
    let mostrandoMas = false;
    const escena = document.getElementById("escena");
    const cajaTexto = document.getElementById("cajaTexto");
    const botonera = document.getElementById("botonera");

    function escribirTexto(texto) {
      cajaTexto.innerHTML = '<div class="maquina"></div>';
      const box = cajaTexto.querySelector('.maquina');
      let i = 0;
      (function step() {
        if (i < texto.length) {
          box.textContent = texto.slice(0, i + 1);
          box.innerHTML = box.textContent + "<span></span>";
          i++; setTimeout(step, 80);
        } else { box.innerHTML = box.textContent; }
      })();
    }

    function actualizarFondo() {
      const n = indice + 1;
      escena.style.opacity = 0;
      setTimeout(() => {
        escena.style.backgroundImage = `url('img/Pantalla${n}.webp')`;
        escena.style.opacity = 1;
        if (n === 9) {
          escena.classList.add("clickable");
          escena.onclick = () => window.open("https://www.instagram.com/elowen_selen/", "_blank");
        } else { escena.classList.remove("clickable"); escena.onclick = null; }
      }, 300);
    }

    function renderBotones() {
      botonera.innerHTML =
        `<button class="btn btn-mas no-glow" id="btnMas" onclick="conocerMas()">Conocer más</button>
         <button class="btn btn-continuar" id="btnContinuar" onclick="continuar()">Continuar</button>`;
    }

    function mostrarPantalla() {
      const p = pantallas[indice];
      mostrandoMas = false;
      actualizarFondo();
      escribirTexto(p.texto);
      renderBotones();
    }

    function conocerMas() {
      const p = pantallas[indice];
      if (!mostrandoMas && p.mas) {
        mostrandoMas = true;
        escribirTexto(p.mas);
        document.getElementById('btnMas').classList.add('no-glow');
        document.getElementById('btnContinuar').classList.add('glow');
      }
    }

    function continuar() {
      if (indice < pantallas.length - 1) {
        indice++;
        mostrarPantalla();
      }
    }

    mostrarPantalla();
  </script>
</body>
</html>


